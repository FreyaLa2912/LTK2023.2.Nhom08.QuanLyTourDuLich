<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta
            name="description"
            content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
        <meta name="author" content="AdminKit">
        <meta
            name="keywords"
            content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="shortcut icon" href="img/icons/icon-48x48.png"/>

        <link rel="canonical" href="https://demo-basic.adminkit.io/pages-blank.html"/>

        <title>Blank Page | AdminKit Demo</title>

        <link href="css/app.css" rel="stylesheet">
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
            rel="stylesheet">
    </head>

    <body>
        <div class="wrapper">
            <nav id="sidebar" class="sidebar js-sidebar">
                <div class="sidebar-content js-simplebar">
                    <div class="sidebar-brand">
                        <br class="align-middle">BrownDuckTour </br> Quản lý</span>
                    </div>

                    <ul class="sidebar-nav">
                        

                        <li class="sidebar-item active">
                            <a class="sidebar-link" href="indexAdmin.html">
                                <i class="align-middle" data-feather="sliders"></i>
                                <span class="align-middle">Thống kê</span>
                            </a>
                        </li>

						
                        <li class="sidebar-header">
                            TÍNH NĂNG QUẢN LÝ 
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLTour.html">
                                <i class="align-middle" data-feather="navigation"></i>
                                <span class="align-middle">Tour / Lịch trình</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="maps-google.html">
                                <i class="align-middle" data-feather="map"></i>
                                <span class="align-middle">Bản đồ</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLDiaDiem.html">
                                <i class="align-middle" data-feather="map-pin"></i>
                                <span class="align-middle">Địa điểm</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLDotTour.html">
                                <i class="align-middle" data-feather="list"></i>
                                <span class="align-middle">Đợt Tour</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLDonDatTour.html">
                                <i class="align-middle" data-feather="file-text"></i>
                                <span class="align-middle">Đơn đặt Tour</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLNguoiDung.html">
                                <i class="align-middle" data-feather="user"></i>
                                <span class="align-middle">Tài khoản người dùng</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLHuongDanVien.html">
                                <i class="align-middle" data-feather="users"></i>
                                <span class="align-middle">Hướng dẫn viên</span>
                            </a>
                        </li>

                        <li class="sidebar-header">
                            TÀI KHOẢN
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="index.html">
                                <i class="align-middle" data-feather="log-in"></i>
                                <span class="align-middle">Đăng xuất</span>
                            </a>
                        </li>

                        
                    </ul>

                    
                </div>
            </nav>

        <div class="main">
            <nav class="navbar navbar-expand navbar-light navbar-bg">
                <a class="sidebar-toggle js-sidebar-toggle">
                    <i class="hamburger align-self-center"></i>
                </a>

            </nav>

            <main class="content">
                <div class="container-fluid p-0">

                    <h1 class="h3 mb-3">Quản lý Đợt tour</h1>

                    <div class="row">
                        <div class="col-12">
                            <table class="table table-striped" id="dotTourTable">
                                <thead>
                                  <tr>
                                    <th>Mã tour</th>
                                    <th>Turn</th>
                                    <th>Hướng dẫn viên</th>
                                    <th>Số lượng khách tối thiểu</th>
                                    <th>Số lượng khách tối đa</th>
                                    <th>Số lượng khách đã đặt</th>
                                    <th>Trạng thái</th>
                                    <th>Thời gian chốt</th>
                                    <th>Thời gian khởi hành</th>
                                    <th>Thời gian kết thúc</th>
                                    <th>Giá tour</th>
                                    <th>Doanh thu</th>
                                    <th>Thao tác</th>
                                  </tr>
                                </thead>
                                <tbody>
                                </tbody>
                              </table>
                        </div>
                    </div>

                </div>
            </main>

            <footer class="footer">
                <div class="container-fluid">
                    <div class="row text-muted">
                        <div class="col-6 text-start">
                            <p class="mb-0">
                                <a class="text-muted">
                                    <strong>Đồ án</strong>
                                </a>
                                -
                                <a class="text-muted">
                                    <strong>Hệ thống thông tin địa lý ba chiều</strong>
                                </a>
                                &copy;
                            </p>
                        </div>
                        <div class="col-6 text-end">
                            <a class="text-muted">
                                <strong>Ứng dụng quản lý tour cho công ty du lịch (2D)</strong>
                            </a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Gọi API để lấy danh sách đợt tour
    fetch('http://localhost:8080/api/tour_turns') 
      .then(response => {
        if (!response.ok) {
          throw new Error('Lỗi khi lấy danh sách đợt tour');
        }
        return response.json();
      })
      .then(tourTurns => {
        const tbody = document.querySelector('#dotTourTable tbody');
        tbody.innerHTML = ''; // Xóa nội dung cũ trước khi thêm mới

        tourTurns.forEach(tourTurn => {
          const row = document.createElement('tr');
          row.innerHTML = `
                        <td>${tourTurn.tour.maTour}</td>
                        <td>${tourTurn.id.turn}</td>
                        <td>${tourTurn.maHDV}</td> 
                        <td>${tourTurn.soLuongKhachToiThieu}</td>
                        <td>${tourTurn.soLuongKhachToiDa}</td>
                        <td>${tourTurn.soLuongKhachDaDat}</td>
                        <td>${tourTurn.trangThai}</td>
                        <td>${tourTurn.thoiGianChot}</td>
                        <td>${tourTurn.thoiGianKhoiHanh}</td>
                        <td>${tourTurn.thoiGianKetThuc}</td>
                        <td>${tourTurn.giaTour}</td>
                        <td>${tourTurn.doanhThu}</td>
                        <td>
                            <a href="#" class="btn btn-primary btn-sm edit-dottour" data-matour="${tourTurn.tour.maTour}" data-turn="${tourTurn.id.turn}">Sửa</a>
                            <a href="#" class="btn btn-danger btn-sm delete-dottour" data-matour="${tourTurn.tour.maTour}" data-turn="${tourTurn.id.turn}">Xóa</a>
                        </td>
                    `;
          tbody.appendChild(row);
        });

        // Thêm sự kiện click cho nút "Sửa"
        // ... (code xử lý sự kiện click cho nút "Sửa")

        // Thêm sự kiện click cho nút "Xóa"
        // ... (code xử lý sự kiện click cho nút "Xóa")
      })
      .catch(error => {
        console.error('Lỗi khi lấy danh sách đợt tour:', error);
        alert('Không thể lấy danh sách đợt tour. Vui lòng thử lại sau!');
      });
  </script>

</body>

</html>