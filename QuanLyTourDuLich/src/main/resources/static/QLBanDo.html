<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta
            name="description"
            content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
        <meta name="author" content="AdminKit">
        <meta
            name="keywords"
            content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="shortcut icon" href="img/icons/icon-48x48.png"/>

        <title>Bản đồ hành trình Tour</title>

        <link href="css/app.css" rel="stylesheet">

        <style>
            #map {
                height: 100vh;
                width: 100%;
            }
        </style>
    </head>

    <body>

        <div class="wrapper">
            <nav id="sidebar" class="sidebar js-sidebar">
                <div class="sidebar-content js-simplebar">
                    <div class="sidebar-brand">
                        <br class="align-middle">BrownDuckTour
                        </br>
                        Quản lý
                    </div>

                    <ul class="sidebar-nav">
                        <li class="sidebar-item ">
                            <a class="sidebar-link" href="indexAdmin.html">
                                <i class="align-middle" data-feather="sliders"></i>
                                <span class="align-middle">Thống kê</span>
                            </a>
                        </li>

                        <li class="sidebar-header">
                            TÍNH NĂNG QUẢN LÝ
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLTour.html">
                                <i class="align-middle" data-feather="navigation"></i>
                                <span class="align-middle">Tour / Lịch trình</span>
                            </a>
                        </li>

                        <li class="sidebar-item active">
                            <a class="sidebar-link" href="QLBanDo.html">
                                <i class="align-middle" data-feather="map"></i>
                                <span class="align-middle">Bản đồ</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLDiaDiem.html">
                                <i class="align-middle" data-feather="map-pin"></i>
                                <span class="align-middle">Địa điểm</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLDotTour.html">
                                <i class="align-middle" data-feather="list"></i>
                                <span class="align-middle">Đợt Tour</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLDonDatTour.html">
                                <i class="align-middle" data-feather="file-text"></i>
                                <span class="align-middle">Đơn đặt Tour</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLNguoiDung.html">
                                <i class="align-middle" data-feather="user"></i>
                                <span class="align-middle">Tài khoản người dùng</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="QLHuongDanVien.html">
                                <i class="align-middle" data-feather="users"></i>
                                <span class="align-middle">Hướng dẫn viên</span>
                            </a>
                        </li>

                        <li class="sidebar-header">
                            TÀI KHOẢN
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link" href="index.html">
                                <i class="align-middle" data-feather="log-in"></i>
                                <span class="align-middle">Đăng xuất</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="main">
                <nav class="navbar navbar-expand navbar-light navbar-bg">
                    <a class="sidebar-toggle js-sidebar-toggle">
                        <i class="hamburger align-self-center"></i>
                    </a>
                </nav>

                <main class="content">
                    <div class="container-fluid p-0">

                        <div class="row">
                            <div class="col-12 col-lg-4">
                                <h4 class="mb-3">Địa điểm ở Hồ Chí Minh</h4>
                                <ul class="list-group flex-grow-1 overflow-auto">
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Dinh độc lập')">
                                        Dinh độc lập
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng Lịch sử Việt Nam')">
                                        Bảo tàng Lịch sử Việt Nam
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('ninhbinh'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('ninhbinh'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng chiến dịch Hồ Chí Minh')">
                                        Bảo tàng chiến dịch Hồ Chí Minh
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng Thành phố Hồ Chí Minh')">
                                        Bảo tàng Thành phố Hồ Chí Minh
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng Chứng tích Chiến tranh')">
                                        Bảo tàng Chứng tích Chiến tranh
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng Phụ nữ Nam Bộ')">
                                        Bảo tàng Phụ nữ Nam Bộ
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng Lực lượng vũ trang miền Đông Nam Bộ')">
                                        Bảo tàng Lực lượng vũ trang miền Đông Nam Bộ
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng Mỹ thuật Thành phố Hồ Chí Minh')">
                                        Bảo tàng Mỹ thuật Thành phố Hồ Chí Minh
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bảo tàng Áo dài')">
                                        Bảo tàng Áo dài
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Công viên Grand Park')">
                                        Công viên Grand Park
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Chợ Bến Thành')">
                                        Chợ Bến Thành
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bến Cảng Nhà Rồng')">
                                        Bến Cảng Nhà Rồng
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Nhà thờ Đức Bà')">
                                        Nhà thờ Đức Bà
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Bưu điện Trung tâm Sài Gòn')">
                                        Bưu điện Trung tâm Sài Gòn
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Phố đi bộ Nguyễn Huệ')">
                                        Phố đi bộ Nguyễn Huệ
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                    <li
                                        class="list-group-item"
                                        onclick="selectLocation('Landmark 81')">
                                        Landmark 81
                                        <button
                                            class="btn btn-sm btn-warning float-end"
                                            onclick="editLocation('hanoi'); event.stopPropagation();">Sửa</button>
                                        <button
                                            class="btn btn-sm btn-danger float-end me-2"
                                            onclick="deleteLocation('hanoi'); event.stopPropagation();">Xóa</button>
                                    </li>
                                </ul>
                                <button class="btn btn-primary mt-3" onclick="addLocation()">Thêm Địa Điểm</button>
                            </div>
                            <div class="col-12 col-lg-8">
                                <div id="map"></div>

                                <script>
                                    // Tạo bản đồ và cài đặt điểm bắt đầu
                                    const map = L
                                        .map('map')
                                        .setView([
                                            10.876185, 106.798682
                                        ], 14);

                                    // Thêm lớp bản đồ từ OpenStreetMap
                                    L
                                        .tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                            maxZoom: 30,
                                            attribution: '© OpenStreetMap contributors'
                                        })
                                        .addTo(map);
                                    // Danh sách các địa điểm
                                    const locations = {
                                        "Dinh độc lập": [10.776940, 106.695356],
                                        "Bảo tàng Lịch sử Việt Nam": [10.787919, 106.704889],
                                        "Bảo tàng chiến dịch Hồ Chí Minh": [10.786795, 106.704517],
                                        "Bảo tàng Thành phố Hồ Chí Minh": [10.7762, 106.6995],
                                        "Bảo tàng Chứng tích Chiến tranh": [10.7798, 106.6928],
                                        "Bảo tàng Phụ nữ Nam Bộ": [10.7837, 106.6875],
                                        "Bảo tàng Lực lượng vũ trang miền Đông Nam Bộ": [10.8002, 106.6661],
                                        "Bảo tàng Mỹ thuật Thành phố Hồ Chí Minh": [10.7700, 106.6993],
                                        "Bảo tàng Áo dài": [10.8086, 106.8529],
                                        "Công viên Grand Park": [10.8406, 106.8473],
                                        "Chợ Bến Thành": [10.7721, 106.6983],
                                        "Bến Cảng Nhà Rồng": [10.7683, 106.7068],
                                        "Nhà thờ Đức Bà": [10.7798, 106.6992],
                                        "Bưu điện Trung tâm Sài Gòn": [10.7799, 106.6999],
                                        "Phố đi bộ Nguyễn Huệ": [10.7734, 106.7043],
                                        "Landmark 81": [10.7951, 106.7220],
                                    };

                                    // Hàm chọn địa điểm
                                    function selectLocation(locationName) {
                                        const location = locations[locationName];
                                        if (location) {
                                            map.setView(location, 19); // Cập nhật vị trí trung tâm và zoom
                                        } else {
                                            console.error("Không tìm thấy địa điểm:", locationName);
                                        }
                                    }

                                    // Thêm sự kiện click vào bản đồ
                                    map.on("click", function (event) {
                                        const {lng, lat} = event.latlng;

                                        console.log("Tọa độ (Longitude, Latitude):", lng, lat);

                                        // Mở popup tại điểm vừa click
                                        L
                                            .popup()
                                            .setLatLng(event.latlng)
                                            .setContent(
                                                `
									  <b>Tọa độ bạn vừa bấm:</b><br>
									  [${lat.toFixed(6)}, ${lng.toFixed(6)}]
									`
                                            )
                                            .openOn(map);
                                    });

                                    // Hàm tìm tuyến đường bằng API của GraphHopper
                                    async function findRoute(start, end, name, location, color) {
                                        const apiKey = "0685e186-b4a0-463e-8744-bfbe8ed14cee"; // API key của bạn
                                        const url = `https://graphhopper.com/api/1/route?point=${start.lat},${start.lng}&point=${end.lat},${end.lng}&profile=car&locale=en&key=${apiKey}&instructions=false`;

                                        try {
                                            const response = await fetch(url);
                                            if (!response.ok) 
                                                throw new Error(`HTTP error! status: ${response.status}`);
                                            const data = await response.json();

                                            if (data.paths && data.paths.length > 0) {
                                                const path = data
                                                    .paths[0]
                                                    .points; // Lấy tuyến đường
                                                const decodedPath = decodePolyline(path); // Giải mã polyline

                                                const latLngs = decodedPath.map(coord => [
                                                    coord[0], coord[1]
                                                ]);
                                                const polyline = L
                                                    .polyline(latLngs, {
                                                        color: color, // Màu đường vẽ (thay đổi màu tùy theo tuyến đường)
                                                        weight: 5, // Độ rộng của đường vẽ
                                                        opacity: 0.7 // Độ mờ của đường vẽ
                                                    })
                                                    .addTo(map);
                                                map.fitBounds(polyline.getBounds()); // Phóng to vùng có tuyến đường

                                                // Thêm popup với tên và địa điểm
                                                polyline.bindPopup(
                                                    `
										<b>Tên tuyến đường:</b> ${name}<br>
										<b>Địa điểm:</b> ${location}
									  `
                                                );

                                                // Lấy điểm start và end
                                                const startPoint = decodedPath[0]; // Điểm bắt đầu
                                                const endPoint = decodedPath[decodedPath.length - 1]; // Điểm kết thúc

                                                // Tạo marker cho điểm bắt đầu với tên của start
                                                L
                                                    .marker([
                                                        startPoint[0], startPoint[1]
                                                    ], {
                                                        icon: L.icon({
                                                            iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',
                                                            iconSize: [
                                                                25, 41
                                                            ],
                                                            iconAnchor: [
                                                                12, 41
                                                            ],
                                                            popupAnchor: [
                                                                1, -34
                                                            ],
                                                            shadowSize: [41, 41]
                                                        })
                                                    })
                                                    .bindPopup(`<b>Điểm bắt đầu:</b> ${start.name}`) // Hiển thị tên điểm bắt đầu
                                                    .addTo(map);

                                                // Tạo marker cho điểm kết thúc với tên của end
                                                L
                                                    .marker([
                                                        endPoint[0], endPoint[1]
                                                    ], {
                                                        icon: L.divIcon({
                                                            className: 'custom-icon',
                                                            html: `
								  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="41" viewBox="0 0 25 41">
									<path fill="#ff0000" d="M12.5 0C6.2 0 0 5.8 0 13c0 9.3 12.5 27.8 12.5 27.8S25 22.3 25 13c0-7.2-6.2-13-12.5-13zm0 18.5c-3 0-5.5-2.5-5.5-5.5s2.5-5.5 5.5-5.5 5.5 2.5 5.5 5.5-2.5 5.5-5.5 5.5z"/>
								  </svg>
								`,
                                                            iconSize: [
                                                                25, 41
                                                            ],
                                                            iconAnchor: [12.5, 41]
                                                        })
                                                    })
                                                    .bindPopup(`<b>Điểm kết thúc:</b> ${end.name}`)
                                                    .addTo(map);
                                            } else {
                                                console.error("No paths found in response");
                                            }
                                        } catch (error) {
                                            console.error("Error fetching route:", error);
                                        }
                                    }

                                    // Hàm giải mã polyline
                                    function decodePolyline(encoded) {
                                        const points = [];
                                        let index = 0,
                                            len = encoded.length;
                                        let lat = 0,
                                            lng = 0;

                                        while (index < len) {
                                            let b,
                                                shift = 0,
                                                result = 0;
                                            do {
                                                b = encoded.charCodeAt(index++) - 63;
                                                result |= (b & 0x1f) << shift;
                                                shift += 5;
                                            } while (b >= 0x20);
                                            const dlat = (
                                                (result & 1)
                                                    ? ~ (result >> 1)
                                                    : (result >> 1)
                                            );
                                            lat += dlat;

                                            shift = 0;
                                            result = 0;
                                            do {
                                                b = encoded.charCodeAt(index++) - 63;
                                                result |= (b & 0x1f) << shift;
                                                shift += 5;
                                            } while (b >= 0x20);
                                            const dlng = (
                                                (result & 1)
                                                    ? ~ (result >> 1)
                                                    : (result >> 1)
                                            );
                                            lng += dlng;

                                            points.push([
                                                lat / 1e5,
                                                lng / 1e5
                                            ]);
                                        }

                                        return points;
                                    }

                                    // Định nghĩa các tuyến đường với các màu khác nhau
                                    const routes = [
                                        {
                                            start: {
                                                lat: 10.7762,
                                                lng: 106.6995,
                                                name: "Bảo tàng Thành phố Hồ Chí Minh"
                                            },
                                            end: {
                                                lat: 10.7798,
                                                lng: 106.6928,
                                                name: "Bảo tàng Chứng tích Chiến tranh"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7798,
                                                lng: 106.6928,
                                                name: "Bảo tàng Chứng tích Chiến tranh"
                                            },
                                            end: {
                                                lat: 10.7837, 
                                                lng: 106.6875,
                                                name: "Bảo tàng Phụ nữ Nam Bộ"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7837, 
                                                lng: 106.6875,
                                                name: "Bảo tàng Phụ nữ Nam Bộ"
                                            },
                                            end: {
                                                lat: 10.7700, 
                                                lng: 106.6993,
                                                name: "Bảo tàng Mỹ thuật Thành phố Hồ Chí Minh"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7700, 
                                                lng: 106.6993,
                                                name: "Bảo tàng Mỹ thuật Thành phố Hồ Chí Minh"
                                            },
                                            end: {
                                                lat: 10.7763,
                                                lng: 106.6954,
                                                name: "Dinh độc lập"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7763,
                                                lng: 106.6954,
                                                name: "Dinh độc lập"
                                            },
                                            end: {
                                                lat: 10.7847, 
                                                lng: 106.7022,
                                                name: "Bảo tàng Lịch sử Việt Nam"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7847, 
                                                lng: 106.7022,
                                                name: "Bảo tàng Lịch sử Việt Nam"
                                            },
                                            end: {
                                                lat: 10.8002,
                                                lng: 106.6661,
                                                name: "Bảo tàng Lực lượng vũ trang miền Đông Nam Bộ"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.8002,
                                                lng: 106.6661,
                                                name: "Bảo tàng Lực lượng vũ trang miền Đông Nam Bộ"
                                            },
                                            end: {
                                                lat: 10.7793, 
                                                lng: 106.7008,
                                                name: "Bảo tàng Chiến dịch Hồ Chí Minh"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7793, 
                                                lng: 106.7008,
                                                name: "Bảo tàng Chiến dịch Hồ Chí Minh"
                                            },
                                            end: {
                                                lat: 10.8086, 
                                                lng: 106.8529,
                                                name: "Bảo tàng Áo dài"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "blue" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7763,
                                                lng: 106.6954,
                                                name: "Dinh độc lập"
                                            },
                                            end: {
                                                lat: 10.7798,
                                                lng: 106.6992,
                                                name: "Nhà thờ Đức Bà"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "red" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7798,
                                                lng: 106.6992,
                                                name: "Nhà thờ Đức Bà"
                                            },
                                            end: {
                                                lat: 10.7799, 
                                                lng: 106.6999,
                                                name: "Bưu điện Trung tâm Sài Gòn"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "red" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7799, 
                                                lng: 106.6999,
                                                name: "Bưu điện Trung tâm Sài Gòn"
                                            },
                                            end: {
                                                lat: 10.7734,
                                                lng: 106.7043,
                                                name: "Phố đi bộ Nguyễn Huệ"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "red" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7734,
                                                lng: 106.7043,
                                                name: "Phố đi bộ Nguyễn Huệ"
                                            },
                                            end: {
                                                lat: 10.7721, 
                                                lng: 106.6983,
                                                name: "Chợ Bến Thành"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "red" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7721, 
                                                lng: 106.6983,
                                                name: "Chợ Bến Thành"
                                            },
                                            end: {
                                                lat: 10.7683,
                                                lng: 106.7068,
                                                name: "Bến Cảng Nhà Rồng"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "red" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7683,
                                                lng: 106.7068,
                                                name: "Bến Cảng Nhà Rồng"
                                            },
                                            end: {
                                                lat: 10.7951, 
                                                lng: 106.7220,
                                                name: "Landmark 81"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "red" // Màu của tuyến đường
                                        }, {
                                            start: {
                                                lat: 10.7951, 
                                                lng: 106.7220,
                                                name: "Landmark 81"
                                            },
                                            end: {
                                                lat: 10.8406,
                                                lng: 106.8473,
                                                name: "Công viên Grand Park"
                                            },
                                            name: "",
                                            location: "" +
                                                    "m",
                                            color: "red" // Màu của tuyến đường
                                        }
                                    ];

                                    // Tìm tuyến đường cho các tuyến đã định nghĩa
                                    routes.forEach(route => {
                                        findRoute(route.start, route.end, route.name, route.location, route.color);
                                    });
                                    
                                    // Thêm hình ảnh và chú thích địa chỉ cho địa điểm.
                                    const points = [
                                        {
                                            lat: 10.787919,
                                            lng: 106.704889,
                                            name: "Bảo tàng Lịch sử Việt Nam",
                                            location: "2 Đ. Nguyễn Bỉnh Khiêm, Bến Nghé, Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                url: "/images/BaoTangLichSuHCM.jpg",
                                                width: "60",
                                                height: "60"
                                            }
                                        }, {
                                            lat: 10.776940,
                                            lng: 106.695356,
                                            name: "Dinh Độc Lập",
                                            location: "135 Đ. Nam Kỳ Khởi Nghĩa, Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                url: "/images/Langbac.jpg",
                                                width: "60",
                                                height: "60"
                                            }
                                        }, {
                                            lat: 10.779314,
                                            lng: 106.692296,
                                            name: "Bảo tàng chứng tích chiến tranh",
                                            location: "Phường 6, Quận 3, Hồ Chí Minh 700000, Việt Nam",
                                            symbol: {
                                                url: "/images/Baotangchungtich.jpg",
                                                width: "60",
                                                height: "60"
                                            }
                                        }, {
                                            lat: 10.775881,
                                            lng: 106.699622,
                                            name: "Bảo Tàng HCM ",
                                            location: "..",
                                            symbol: {
                                                url: "/images/BaotangHCM.jpg",
                                                width: "60",
                                                height: "60"
                                            }
                                        }, {
                                            lat: 10.786998,
                                            lng: 106.704218,
                                            name: "Bảo Tàng  chiến dịch Hồ Chí Minh ",
                                            location: "..",
                                            symbol: {
                                                url: "/images/BaotangchiendichHCM.jpg",
                                                width: "60",
                                                height: "60"
                                            }
                                        }
                                    ];

                                    // Thêm các marker với biểu tượng riêng
                                    points.forEach(point => {
                                        L
                                            .marker([
                                                point.lat, point.lng
                                            ], {
                                                icon: L.icon({
                                                    iconUrl: point.symbol.url || "https://example.com/default-icon.png", // Biểu tượng mặc định nếu không có URL
                                                    iconSize: [
                                                        parseInt(point.symbol.width),
                                                        parseInt(point.symbol.height)
                                                    ],
                                                    iconAnchor: [
                                                        20, 40
                                                    ], // Đặt vị trí neo phù hợp
                                                    popupAnchor: [1, -34]
                                                })
                                            })
                                            .bindPopup(
                                                `
									  <b>Tên:</b> ${point.name}<br>
									  <b>Địa điểm:</b> ${point.location}
									`
                                            )
                                            .addTo(map);
                                    });

                                    // Danh sách các vùng đa giác
                                    const polygons = [
                                    {
                                            type: "polygon",
                                            rings: [
                                                [
                                                    106.696088, 10.774818
                                                ],
                                                [
                                                    106.693083, 10.777485
                                                ],
                                                [
                                                    106.694988, 10.779500
                                                ],
                                                [
                                                    106.697958, 10.776804
                                                ]
                                            ],
                                            name: "Dinh Độc Lập",
                                            location: "Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)", // Màu vùng với độ trong suốt
                                                outline: {
                                                    color: "#FFFFFF", // Màu viền trắng
                                                    width: 1 // Độ rộng viền
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Dinh Độc Lập<br>
                                                                        <b>Địa điểm:</b> Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        }, {
                                            type: "polygon",
                                            rings: [
                                                [
                                                    106.691639, 10.779534
                                                ],
                                                [
                                                    106.692336, 10.778916
                                                ],
                                                [
                                                    106.692802, 10.779366
                                                ],
                                                [
                                                    106.692320, 10.779810
                                                ],
                                                [
                                                    106.691937, 10.779875
                                                ]

                                            ],
                                            name: "Bảo tàng chứng tích chiến tranh",
                                            location: "Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)", // Màu vùng với độ trong suốt
                                                outline: {
                                                    color: "#FFFFFF", // Màu viền trắng
                                                    width: 1 // Độ rộng viền
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bảo tàng chứng tích chiến tranh<br>
                                                                        <b>Địa điểm:</b> Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        }, {
                                            type: "polygon",
                                            rings: [
                                                [
                                                    106.704138, 10.786727
                                                ],
                                                [
                                                    106.704520, 10.787058
                                                ],
                                                [
                                                    106.704332, 10.787213
                                                ],
                                                [
                                                    106.704015, 10.786875
                                                ],
                                                [
                                                    106.704161, 10.786748
                                                ]

                                            ],
                                            name: "Bảo tàng chiến dịch Hồ Chí Minh",
                                            location: "Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)", // Màu vùng với độ trong suốt
                                                outline: {
                                                    color: "#FFFFFF", // Màu viền trắng
                                                    width: 1 // Độ rộng viền
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b>Bảo tàng chiến dịch Hồ Chí Minh<br>
                                                                        <b>Địa điểm:</b> Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        }, {
                                            type: "polygon",
                                            rings: [
                                                [
                                                    106.70483703679164, 10.787551936086835
                                                ],
                                                [
                                                    106.70460435516785, 10.787753498892442
                                                ],
                                                [
                                                    106.70473275538112, 10.787840021583447
                                                ],
                                                [
                                                    106.704515, 10.788095
                                                ],
                                                [
                                                    106.70480450255207, 10.788380402680485
                                                ],
                                                [
                                                    106.70484255110756, 10.788392795278227
                                                ],
                                                [
                                                    106.70533096011185, 10.788003411219393
                                                ]

                                            ],
                                            name: "Bảo tàng lịch sử HCM",
                                            location: "Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)", // Màu vùng với độ trong suốt
                                                outline: {
                                                    color: "#FFFFFF", // Màu viền trắng
                                                    width: 1 // Độ rộng viền
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b>Bảo tàng lịch sử HCM<br>
                                                                        <b>Địa điểm:</b> Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        }, {
                                            type: "polygon",
                                            rings: [
                                                [
                                                    106.699581, 10.775571
                                                ],
                                                [
                                                    106.699298, 10.775819
                                                ],
                                                [
                                                    106.699533, 10.776048
                                                ],
                                                [
                                                    106.699771, 10.776246
                                                ],
                                                [
                                                    106.700010, 10.776029
                                                ],
                                                [
                                                    106.699838, 10.775822
                                                ]

                                            ],
                                            name: "Bảo tàng HCM",
                                            location: "Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)", // Màu vùng với độ trong suốt
                                                outline: {
                                                    color: "#FFFFFF", // Màu viền trắng
                                                    width: 1 // Độ rộng viền
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bảo tàng HCM<br>
                                                                        <b>Địa điểm:</b> Phường Bến Thành, Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.687061, 10.784104],
                                                [106.687592, 10.784410],
                                                [106.687849, 10.784070],
                                                [106.687310, 10.783775]
                                            ],
                                            name: "Bảo tàng Phụ nữ Nam Bộ",
                                            location: "Quận 3, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bảo tàng Phụ nữ Nam Bộ<br>
                                                                        <b>Địa điểm:</b> Quận 3, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.665732, 10.800211],
                                                [106.666837, 10.800145],
                                                [106.666743, 10.799884],
                                                [106.666429, 10.799960],
                                                [106.665853, 10.798519],
                                                [106.665542, 10.798559],
                                                [106.665571, 10.798725],
                                                [106.665147, 10.798799],
                                                [106.665456, 10.800008],
                                                [106.665563, 10.800003],
                                                [106.665571, 10.800097],
                                                [106.665713, 10.800095]
                                            ],
                                            name: "Bảo tàng Lực lượng vũ trang miền Đông Nam Bộ",
                                            location: "Quận Tân Bình, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bảo tàng Lực lượng vũ trang miền Đông Nam Bộ<br>
                                                                        <b>Địa điểm:</b> Quận Tân Bình, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.699286, 10.770337],
                                                [106.699844, 10.769454],
                                                [106.699345, 10.768988],
                                                [106.699029, 10.769410],
                                                [106.698962, 10.769362],
                                                [106.698589, 10.769749]
                                            ],
                                            name: "Bảo tàng Mỹ thuật Thành phố Hồ Chí Minh",
                                            location: "Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bảo tàng Mỹ thuật Thành phố Hồ Chí Minh<br>
                                                                        <b>Địa điểm:</b> Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.852899, 10.809217],
                                                [106.853131, 10.809147],
                                                [106.853240, 10.808403],
                                                [106.852706, 10.808603]
                                            ],
                                            name: "Bảo tàng Áo dài",
                                            location: "Quận 9, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bảo tàng Áo dài<br>
                                                                        <b>Địa điểm:</b> Quận 9, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.846510, 10.844007],
                                                [106.846773, 10.843490],
                                                [106.847331, 10.843654],
                                                [106.848124, 10.843469],
                                                [106.848377, 10.841251],
                                                [106.847679, 10.840993],
                                                [106.847245, 10.839845],
                                                [106.844145, 10.839534],
                                                [106.842692, 10.842273]
                                            ],
                                            name: "Công viên Grand Park",
                                            location: "Quận 9, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Công viên Grand Park<br>
                                                                        <b>Địa điểm:</b> Quận 9, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                            [106.697291, 10.772838],
                                            [106.698090, 10.773320],
                                            [106.698726, 10.772276],
                                            [106.697961, 10.771813]

                                            ],
                                            name: "Chợ Bến Thành",
                                            location: "Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Chợ Bến Thành<br>
                                                                        <b>Địa điểm:</b> Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.705788, 10.768637], 
                                                [106.706687, 10.768827], 
                                                [106.707228, 10.768587], 
                                                [106.707432, 10.768190], 
                                                [106.706260, 10.767636]
                                            ],
                                            name: "Bến Cảng Nhà Rồng",
                                            location: "Quận 4, Hồ Chí Minh, Việt Nam",
                                        symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bến Cảng Nhà Rồng<br>
                                                                        <b>Địa điểm:</b> Quận 4, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.698771, 10.780279],
                                                [106.698471, 10.779949],
                                                [106.699303, 10.779229],
                                                [106.699576, 10.779517]
                                            ],
                                            name: "Nhà thờ Đức Bà",
                                            location: "Quận 1, Hồ Chí Minh, Việt Nam",
                                        symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Nhà thờ Đức Bà<br>
                                                                        <b>Địa điểm:</b> Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.700102, 10.780953],
                                                [106.700976, 10.780178],
                                                [106.700190, 10.779325],
                                                [106.699268, 10.780057]
                                            ],
                                            name: "Bưu điện Trung tâm Sài Gòn",
                                            location: "Quận 1, Hồ Chí Minh, Việt Nam",
                                        symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Bưu điện Trung tâm Sài Gòn<br>
                                                                        <b>Địa điểm:</b> Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.702352, 10.775462],
                                                [106.702167, 10.775270],
                                                [106.706244, 10.771510],
                                                [106.706273, 10.771842]
                                            ],
                                            name: "Phố đi bộ Nguyễn Huệ",
                                            location: "Quận 1, Hồ Chí Minh, Việt Nam",
                                            symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Phố đi bộ Nguyễn Huệ<br>
                                                                        <b>Địa điểm:</b> Quận 1, Hồ Chí Minh, Việt Nam
                                                                        `
                                        },
                                        {
                                            type: "polygon",
                                            rings: [
                                                [106.721460, 10.795410],
                                                [106.721283, 10.795281],
                                                [106.721385, 10.795139],
                                                [106.721163, 10.794962],
                                                [106.721586, 10.794391],
                                                [106.721651, 10.794438],
                                                [106.721758, 10.794298],
                                                [106.721820, 10.794341],
                                                [106.721884, 10.794275],
                                                [106.721956, 10.794317],
                                                [106.722026, 10.794246],
                                                [106.722203, 10.794396],
                                                [106.722160, 10.794456],
                                                [106.722201, 10.794518],
                                                [106.722153, 10.794586],
                                                [106.722171, 10.794702],
                                                [106.722223, 10.794746],
                                                [106.722183, 10.794804],
                                                [106.722231, 10.794860],
                                                [106.722286, 10.794866],
                                                [106.722280, 10.794921],
                                                [106.722200, 10.795034],
                                                [106.722267, 10.795098],
                                                [106.722224, 10.795143],
                                                [106.722101, 10.795052],
                                                [106.721852, 10.795373],
                                                [106.721628, 10.795209]
                                            ],
                                            name: "Landmark 81",
                                            location: "Quận Bình Thạnh, Hồ Chí Minh, Việt Nam",
                                        symbol: {
                                                color: "rgba(204, 153, 0, 0.2)",
                                                outline: {
                                                    color: "#FFFFFF",
                                                    width: 1
                                                }
                                            },
                                            popupTemplate: `
                                                                        <b>Tên:</b> Landmark 81<br>
                                                                        <b>Địa điểm:</b> Quận Bình Thạnh, Hồ Chí Minh, Việt Nam
                                                                        `
                                        }
                                    ];

                                    // Thêm các vùng đa giác lên bản đồ
                                    polygons.forEach(polygon => {
                                        const latLngs = polygon
                                            .rings
                                            .map(([lng, lat]) => [lat, lng]); // Chuyển đổi tọa độ

                                        // Tạo vùng đa giác với Leaflet
                                        const layer = L.polygon(latLngs, {
                                            color: polygon.symbol.outline.color,
                                            weight: polygon.symbol.outline.width,
                                            fillColor: polygon.symbol.color,
                                            fillOpacity: 1
                                        });

                                        // Thêm pop-up cho vùng
                                        layer.bindPopup(polygon.popupTemplate);

                                        // Thêm vùng đa giác vào bản đồ
                                        layer.addTo(map);
                                    });
                                </script>
                            </div>
                        </div>

                    </div>
                </main>

                <footer class="footer">
                    <div class="container-fluid">
                        <div class="row text-muted">
                            <div class="col-6 text-start">
                                <p class="mb-0">
                                    <a class="text-muted">
                                        <strong>Đồ án</strong>
                                    </a>
                                    -
                                    <a class="text-muted">
                                        <strong>Hệ thống thông tin địa lý ba chiều</strong>
                                    </a>
                                    &copy;
                                </p>
                            </div>
                            <div class="col-6 text-end">
                                <a class="text-muted">
                                    <strong>Ứng dụng quản lý tour cho công ty du lịch (2D)</strong>
                                </a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>

        <script src="js/app.js"></script>

        <script></script>

    </body>

</html>